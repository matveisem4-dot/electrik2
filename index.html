<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows 12 | HEXA Core</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { 
            background: url('https://images.wallpapersden.com/image/download/windows-12-stock-dark_bWlpZ2uUmZqaraWkpJRmbmdlrWZnZ2U.jpg') no-repeat center center fixed; 
            background-size: cover;
            overflow: hidden;
            font-family: 'Segoe UI', system-ui, sans-serif;
            height: 100vh;
            user-select: none;
        }
        
        /* Стек окон (Z-index менеджмент) */
        .window {
            position: absolute;
            min-width: 400px;
            min-height: 300px;
            background: rgba(18, 18, 18, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            z-index: 10;
        }
        .window.active { z-index: 100; border-color: rgba(59, 130, 246, 0.5); }

        .window-header {
            padding: 12px 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            background: rgba(255,255,255,0.03);
        }

        .taskbar {
            position: fixed;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            height: 64px;
            background: rgba(10, 10, 10, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 22px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 12px;
            border: 1px solid rgba(255,255,255,0.08);
            z-index: 1000;
        }

        .task-icon {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            transition: 0.2s cubic-bezier(0.2, 0, 0, 1);
            cursor: pointer;
            position: relative;
        }
        .task-icon:hover { background: rgba(255,255,255,0.1); transform: translateY(-4px); }
        .task-icon.active::after {
            content: ''; position: absolute; bottom: 2px; width: 4px; height: 4px; background: #3b82f6; border-radius: 50%;
        }

        /* Контекстное меню */
        #contextMenu {
            position: fixed; background: rgba(25, 25, 25, 0.9); backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; width: 200px;
            padding: 8px; z-index: 2000; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .menu-item {
            padding: 8px 12px; border-radius: 6px; font-size: 13px; color: #eee; cursor: pointer;
        }
        .menu-item:hover { background: rgba(255,255,255,0.1); }
    </style>
</head>
<body oncontextmenu="return showContextMenu(event)">

    <div id="desktop" class="h-full w-full p-4 relative" onclick="hideContextMenu()">
        </div>

    <div id="contextMenu">
        <div class="menu-item" onclick="createFolder()">Создать папку</div>
        <div class="menu-item" onclick="location.reload()">Обновить систему</div>
        <hr class="border-white/10 my-1">
        <div class="menu-item">Персонализация</div>
    </div>

    <div class="taskbar">
        <div class="task-icon bg-blue-600 text-white shadow-lg"><i class="fab fa-windows"></i></div>
        <div class="task-icon text-yellow-500" onclick="openWindow('explorer', 'Проводник')"><i class="fas fa-folder text-xl"></i></div>
        <div class="task-icon text-blue-400" onclick="openWindow('hexa', 'HEXA Messenger')"><i class="fas fa-comment-dots text-xl"></i></div>
    </div>

    <script>
        let zIndexCounter = 100;
        let folders = JSON.parse(localStorage.getItem('win12_folders') || '[]');

        // Инициализация рабочего стола
        function renderDesktop() {
            const desktop = document.getElementById('desktop');
            desktop.innerHTML = '';
            folders.forEach((folder, index) => {
                const div = document.createElement('div');
                div.className = 'absolute flex flex-col items-center p-4 rounded-xl hover:bg-white/10 cursor-pointer w-24 text-white text-center';
                div.style.left = (index * 100 + 20) + 'px';
                div.style.top = '20px';
                div.innerHTML = `<i class="fas fa-folder text-4xl text-yellow-500 mb-2"></i><span class="text-xs font-medium truncate w-full">${folder.name}</span>`;
                div.ondblclick = () => openWindow('explorer', folder.name);
                desktop.appendChild(div);
            });
        }

        // Система Окон
        function openWindow(type, title) {
            const id = 'win-' + Math.random().toString(36).substr(2, 9);
            const win = document.createElement('div');
            win.className = 'window active';
            win.id = id;
            win.style.left = '150px';
            win.style.top = '100px';
            win.style.zIndex = ++zIndexCounter;

            let content = '';
            if(type === 'hexa') content = `<iframe src="https://electrik2-9f1c.vercel.app" class="w-full h-full border-none rounded-b-16"></iframe>`;
            if(type === 'explorer') content = `<div class="p-6 grid grid-cols-4 gap-4 text-white">
                <div class="flex flex-col items-center"><i class="fas fa-file-pdf text-red-500 text-3xl"></i><p class="text-[10px] mt-2">Документ.pdf</p></div>
                <div class="flex flex-col items-center"><i class="fas fa-image text-green-500 text-3xl"></i><p class="text-[10px] mt-2">Фото.jpg</p></div>
            </div>`;

            win.innerHTML = `
                <div class="window-header" onmousedown="focusWin('${id}'); dragStart(event, '${id}')">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-window-maximize text-[10px] text-white/40"></i>
                        <span class="text-xs font-semibold text-white/90 uppercase tracking-widest">${title}</span>
                    </div>
                    <div class="flex gap-2">
                        <div class="w-3 h-3 rounded-full bg-white/10 hover:bg-yellow-500 transition cursor-pointer"></div>
                        <div class="w-3 h-3 rounded-full bg-white/10 hover:bg-red-500 transition cursor-pointer" onclick="document.getElementById('${id}').remove()"></div>
                    </div>
                </div>
                <div class="flex-1 overflow-hidden">${content}</div>
            `;
            
            document.body.appendChild(win);
            focusWin(id);
        }

        function focusWin(id) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('active'));
            const win = document.getElementById(id);
            if(win) {
                win.classList.add('active');
                win.style.zIndex = ++zIndexCounter;
            }
        }

        // Перетаскивание
        function dragStart(e, id) {
            const win = document.getElementById(id);
            let startX = e.clientX - win.offsetLeft;
            let startY = e.clientY - win.offsetTop;

            function move(e) {
                win.style.left = (e.clientX - startX) + 'px';
                win.style.top = (e.clientY - startY) + 'px';
            }
            function stop() {
                document.removeEventListener('mousemove', move);
                document.removeEventListener('mouseup', stop);
            }
            document.addEventListener('mousemove', move);
            document.addEventListener('mouseup', stop);
        }

        // Функции рабочего стола
        function showContextMenu(e) {
            e.preventDefault();
            const menu = document.getElementById('contextMenu');
            menu.style.display = 'block';
            menu.style.left = e.clientX + 'px';
            menu.style.top = e.clientY + 'px';
            return false;
        }

        function hideContextMenu() {
            document.getElementById('contextMenu').style.display = 'none';
        }

        function createFolder() {
            const name = prompt("Название папки:", "Новая папка");
            if(name) {
                folders.push({ name: name, type: 'folder' });
                localStorage.setItem('win12_folders', JSON.stringify(folders));
                renderDesktop();
            }
            hideContextMenu();
        }

        renderDesktop();
    </script>
</body>
</html>
