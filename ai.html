<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AETERNA | CORE 1234</title>
    <style>
        :root { --neon: #00ffcc; --bg: #020408; --accent: #bd00ff; }
        body { background: var(--bg); color: var(--neon); font-family: 'Courier New', monospace; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        #terminal { flex: 1; padding: 20px; overflow-y: auto; background: radial-gradient(circle, #0a1122 0%, #020408 100%); }
        .log { margin-bottom: 10px; border-left: 2px solid var(--neon); padding-left: 15px; font-size: 14px; }
        .server { border-color: var(--accent); color: #fff; background: rgba(189, 0, 255, 0.05); }
        .error { border-color: #ff0055; color: #ff0055; }
        .input-area { padding: 20px; background: #050a14; display: flex; gap: 10px; border-top: 1px solid #1a2a44; }
        input { flex: 1; background: transparent; border: 1px solid var(--neon); color: #fff; padding: 15px; outline: none; }
        button { background: var(--neon); color: #000; border: none; padding: 0 30px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div id="terminal">
    <div class="log">>>> СИСТЕМА AETERNA v3.0 // KEY: 1234</div>
    <div class="log">>>> NODE: electrik2.matveisem4.workers.dev</div>
</div>

<div class="input-area">
    <input type="text" id="userInput" placeholder="Введите команду для сервера..." autocomplete="off">
    <button id="sendBtn">EXECUTE</button>
</div>

<script>
    const term = document.getElementById('terminal');
    const input = document.getElementById('userInput');
    const btn = document.getElementById('sendBtn');

    // ТВОЙ РАБОЧИЙ АДРЕС ИЗ CLOUDFLARE
    const WORKER_URL = "https://electrik2.matveisem4.workers.dev/";

    function print(text, type = '') {
        const d = document.createElement('div');
        d.className = `log ${type}`;
        d.innerHTML = `[${new Date().toLocaleTimeString()}] ${text}`;
        term.appendChild(d);
        term.scrollTop = term.scrollHeight;
    }

    async function handleRequest() {
        const val = input.value.trim();
        if(!val) return;
        input.value = '';

        print(`USER: ${val}`);

        try {
            // Имитация "Спец-Браузера": ищем данные (через прокси, чтобы не было ошибок)
            print("БРАУЗЕР: Поиск и фильтрация рекламы...");
            const searchRes = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://www.google.com/search?q=' + val)}`);
            const searchData = await searchRes.json();
            
            // Отправка на "Огромный Сервер"
            print("СЕРВЕР: Синхронизация данных...");
            const response = await fetch(WORKER_URL, {
                method: 'POST',
                headers: { 
                    'Authorization': '1234', 
                    'Content-Type': 'application/json' 
                },
                body: JSON.stringify({ query: val, data: searchData.contents.substring(0, 1000) })
            });

            if (!response.ok) throw new Error(`Ошибка сервера: ${response.status}`);

            const result = await response.json();
            print(`GLOBAL_SERVER: ${result.verdict}. ${result.summary}`, 'server');

        } catch (e) {
            print(`КРИТИЧЕСКАЯ ОШИБКА: ${e.message}. Убедись, что Worker задеплоен!`, 'error');
        }
    }

    btn.onclick = handleRequest;
    input.onkeypress = (e) => { if(e.key === 'Enter') handleRequest(); };
</script>
</body>
</html>
