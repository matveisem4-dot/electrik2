<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>VOID-NET // NEURAL LEARNING</title>
    <style>
        :root { --main: #007bff; --bg: #f5f7fb; --panel: #ffffff; --text: #333; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); display: flex; flex-direction: column; height: 100vh; color: var(--text); }
        
        header { background: var(--panel); padding: 12px 25px; border-bottom: 1px solid #d1d9e0; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-weight: 800; color: var(--main); font-size: 1.2rem; }
        
        .container { display: flex; flex: 1; overflow: hidden; }
        
        /* Монитор обучения */
        .learning-monitor { width: 380px; background: var(--panel); border-left: 1px solid #d1d9e0; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .stat-card { background: #f8f9fa; border: 1px solid #eee; padding: 10px; border-radius: 8px; font-family: monospace; }
        .progress-bar { height: 6px; background: #eee; border-radius: 3px; overflow: hidden; margin-top: 10px; }
        .progress-fill { height: 100%; background: var(--main); width: 0%; transition: 0.2s; }

        /* Чат */
        #display { flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; background: white; }
        .msg { padding: 12px 18px; border-radius: 20px; max-width: 75%; font-size: 15px; line-height: 1.5; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .user { background: var(--main); color: white; align-self: flex-end; }
        .ai { background: #e9ecef; color: black; align-self: flex-start; }

        .input-box { padding: 20px; background: white; border-top: 1px solid #d1d9e0; display: flex; gap: 10px; }
        input { flex: 1; padding: 14px; border: 1px solid #ddd; border-radius: 10px; outline: none; }
        button { background: var(--main); color: white; border: none; padding: 0 25px; border-radius: 10px; cursor: pointer; font-weight: 600; }
    </style>
</head>
<body>

<header>
    <div class="logo">VOID-NET // NEURAL CORE</div>
    <div style="font-size: 12px; color: #888;">PASS_KEY: 1234 // STATUS: ACTIVE</div>
</header>

<div class="container">
    <main id="display">
        <div class="msg ai">Система готова к обучению. Введите запрос, чтобы запустить эпохи подбора параметров.</div>
    </main>

    <aside class="learning-monitor">
        <h3 style="margin:0; font-size: 16px;">Мониторинг обучения</h3>
        
        <div class="stat-card">
            <div style="color: var(--main);">ЭПОХИ (EPOCHS): <span id="epoch-count">0/50</span></div>
            <div class="progress-bar"><div id="epoch-fill" class="progress-fill"></div></div>
        </div>

        <div class="stat-card">
            <div style="color: #e67e22;">ПОГРЕШНОСТЬ (LOSS):</div>
            <div id="loss-value">0.0000</div>
        </div>

        <div class="stat-card">
            <div style="color: #27ae60;">ВХОДНЫЕ ТОКЕНЫ:</div>
            <div id="tokens-view" style="word-break: break-all; font-size: 10px;">WAITING...</div>
        </div>

        <div style="font-size: 11px; color: #999; line-height: 1.4;">
            * Нейронка переводит текст в векторы, сравнивает их с базой знаний и минимизирует ошибку (Loss), пока ответ не станет понятным.
        </div>
    </aside>
</div>

<div class="input-box">
    <input type="text" id="userInput" placeholder="Напишите что-нибудь..." autocomplete="off">
    <button id="runBtn">ЗАПУСТИТЬ ОБУЧЕНИЕ</button>
</div>

<script>
    const display = document.getElementById('display');
    const input = document.getElementById('userInput');
    const runBtn = document.getElementById('runBtn');
    
    const epochText = document.getElementById('epoch-count');
    const epochFill = document.getElementById('epoch-fill');
    const lossText = document.getElementById('loss-value');
    const tokenText = document.getElementById('tokens-view');

    function print(text, type) {
        const d = document.createElement('div');
        d.className = `msg ${type}`;
        d.innerText = text;
        display.appendChild(d);
        display.scrollTop = display.scrollHeight;
    }

    async function neuralInference(text) {
        // Превращаем текст в "цифры" для монитора
        const tokens = text.split('').map(c => c.charCodeAt(0)).join('.');
        tokenText.innerText = tokens;

        // Цикл "Эпох Обучения"
        let loss = 1.0000;
        for(let i = 1; i <= 50; i++) {
            loss -= 0.018 + (Math.random() * 0.005);
            if(loss < 0.001) loss = 0.0001;

            epochText.innerText = `${i}/50`;
            epochFill.style.width = `${(i/50)*100}%`;
            lossText.innerText = loss.toFixed(4);

            // Скорость обучения (чуть быстрее в конце)
            await new Promise(r => setTimeout(r, 40 - (i/2)));
        }

        // Выдача "красивого" ответа после обучения
        if(text.toLowerCase().includes("привет")) return "Здравствуйте! Нейросеть успешно завершила 50 эпох обучения и готова к работе. Как я могу вам помочь?";
        if(text.toLowerCase().includes("кто ты")) return "Я — адаптивный интеллект VOID-NET. Моя задача — фильтровать данные и выдавать чистые ответы без рекламы.";
        return "Анализ завершен. Параметры оптимизированы под ваш запрос. Я поняла вашу мысль и готова продолжать диалог.";
    }

    async function handle() {
        const val = input.value.trim();
        if(!val) return;

        print(val, 'user');
        input.value = '';
        runBtn.disabled = true;

        const result = await neuralInference(val);
        setTimeout(() => {
            print(result, 'ai');
            runBtn.disabled = false;
        }, 300);
    }

    runBtn.onclick = handle;
    input.onkeypress = (e) => { if(e.key === 'Enter') handle(); };
</script>
</body>
</html>
