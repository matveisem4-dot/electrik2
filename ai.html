<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>THE 1234 PROTOCOL | Multi-Core AI</title>
    <style>
        :root { --neon: #00f2ff; --bg: #05070a; --panel: #10141b; }
        body { background: var(--bg); color: #00f2ff; font-family: 'Consolas', monospace; margin: 0; display: flex; height: 100vh; }
        
        /* Панель выбора ядер */
        .sidebar { width: 260px; background: var(--panel); border-right: 1px solid var(--neon); padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .core-btn { 
            background: rgba(0, 242, 255, 0.05); border: 1px solid #1a2a3a; color: #888; 
            padding: 15px; cursor: pointer; text-align: left; transition: 0.3s; font-size: 12px;
        }
        .core-btn:hover { border-color: var(--neon); color: var(--neon); box-shadow: 0 0 10px rgba(0,242,255,0.2); }
        .core-btn.active { background: rgba(0, 242, 255, 0.2); color: #fff; border-color: var(--neon); }

        /* Окно терминала */
        main { flex: 1; display: flex; flex-direction: column; padding: 20px; }
        #terminal { 
            flex: 1; background: rgba(0,0,0,0.5); border: 1px solid #1a2a3a; 
            padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px;
            box-shadow: inset 0 0 20px rgba(0,0,0,1);
        }
        .msg { padding: 5px 0; animation: scan 0.2s ease-out; }
        @keyframes scan { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        
        .user-label { color: #fff; font-weight: bold; }
        .core-label { font-weight: bold; text-transform: uppercase; margin-right: 10px; }

        /* Поле ввода */
        .input-box { display: flex; gap: 10px; margin-top: 20px; background: var(--panel); padding: 10px; border: 1px solid #1a2a3a; }
        input { flex: 1; background: transparent; border: none; color: #fff; outline: none; font-family: inherit; font-size: 16px; }
    </style>
</head>
<body>

<div class="sidebar">
    <h3 style="margin:0 0 10px 0; font-size: 14px;">AVAILABLE CORES:</h3>
    <button class="core-btn active" onclick="setCore('quantum', this)">[01] AETERNA-QUANTUM<br><small>Вероятностная логика</small></button>
    <button class="core-btn" onclick="setCore('void', this)">[02] VOID-WALKER 3D<br><small>Геометрический анализ</small></button>
    <button class="core-btn" onclick="setCore('synapse', this)">[03] SYNAPSE ZERO<br><small>Чистая нейросеть</small></button>
    <button class="core-btn" onclick="setCore('ai', this)">[04] CYBERMIND-TEXT<br><small>Языковая модель</small></button>
    <div style="margin-top:auto; font-size: 10px; opacity: 0.5;">STATUS: SECURITY_LEVEL_1234</div>
</div>

<main>
    <div id="terminal">
        <div class="msg"><span style="color:#888;">[SYSTEM]: Все модули синхронизированы. Выберите ядро и отправьте запрос.</span></div>
    </div>
    <div class="input-box">
        <span style="color:var(--neon)">>>></span>
        <input type="text" id="userInput" placeholder="Введите команду для активного ядра..." autofocus>
    </div>
</main>

<script type="module">
    // Подгружаем библиотеку для 4-го ядра
    import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.1';
    window.aiPipeline = pipeline;
</script>

<script>
    let currentCore = 'quantum';
    let aiModel = null;
    const terminal = document.getElementById('terminal');
    const input = document.getElementById('userInput');

    function setCore(core, btn) {
        currentCore = core;
        document.querySelectorAll('.core-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        addLog(`Переключение на ядро: ${core.toUpperCase()}`, "#888");
    }

    function addLog(text, color = "#00f2ff", label = "SYSTEM") {
        const div = document.createElement('div');
        div.className = 'msg';
        div.innerHTML = `<span class="core-label" style="color:${color}">[${label}]</span> ${text}`;
        terminal.appendChild(div);
        terminal.scrollTop = terminal.scrollHeight;
    }

    async function processCommand() {
        const val = input.value.trim();
        if (!val) return;

        // Показываем сообщение пользователя
        const uDiv = document.createElement('div');
        uDiv.className = 'msg';
        uDiv.innerHTML = `<span class="user-label">[USER]</span> ${val}`;
        terminal.appendChild(uDiv);
        input.value = '';

        // Логика разных ядер
        switch(currentCore) {
            case 'quantum':
                const qRes = Math.random() > 0.5 ? "СОСТОЯНИЕ_1 (ИСТИНА)" : "СОСТОЯНИЕ_0 (ЛОЖЬ)";
                addLog(`Квантовый анализ "${val}": ответ находится в суперпозиции. Результат измерения: ${qRes}`, "#ff00ff", "QUANTUM");
                break;

            case 'void':
                const dist = (Math.random() * 20).toFixed(2);
                addLog(`Проверка вектора "${val}": препятствие обнаружено на дистанции ${dist} units. Координаты Z смещены.`, "#00d4ff", "VOID");
                break;

            case 'synapse':
                const weight = (Math.random()).toFixed(5);
                addLog(`Нейрон активирован на запрос "${val}". Сила синапса: ${weight}. Решение принято на основе весов.`, "#ccff00", "SYNAPSE");
                break;

            case 'ai':
                addLog("Загрузка текстовых нейронов... ждите.", "#fff", "AI");
                if (!aiModel) {
                    aiModel = await window.aiPipeline('text2text-generation', 'Xenova/LaMini-Flan-T5-78M');
                }
                const output = await aiModel(val, { max_new_tokens: 50 });
                addLog(output[0].generated_text, "#fff", "AI");
                break;
        }
    }

    input.onkeypress = (e) => { if(e.key === 'Enter') processCommand(); };
</script>
</body>
</html>
