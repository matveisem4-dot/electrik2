<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FEAR CONNECT - BREAKER MODE</title>
    <style>
        body { background: #000; color: #f00; font-family: 'Courier New', monospace; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; text-shadow: 0 0 5px #f00; }
        .terminal { border: 4px solid #f00; padding: 25px; border-radius: 5px; width: 90%; max-width: 400px; text-align: center; box-shadow: 0 0 20px #f00; }
        h1 { font-size: 1.5rem; letter-spacing: 3px; }
        #status { margin: 20px 0; font-weight: bold; min-height: 50px; color: #ff0; }
        button { background: #f00; color: #000; border: none; padding: 20px; width: 100%; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #fff; box-shadow: 0 0 15px #fff; }
        .danger { color: #fff; background: #500; font-size: 0.7rem; padding: 5px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="terminal">
    <h1>UNIT: BREAKER v4.0</h1>
    <div id="status">СТАТУС: ОРУЖИЕ ЗАРЯЖЕНО</div>
    
    <button onclick="bruteForce()">ВЫЛОМАТЬ ДВЕРЬ (HACK)</button>
    
    <div class="danger">ВНИМАНИЕ: ПРЯМОЕ ВТОРЖЕНИЕ В ПРОЦЕССОР GD32</div>
</div>

<script>
async function bruteForce() {
    const status = document.getElementById('status');
    try {
        status.innerText = "ШТУРМ: ПОИСК ЦЕЛИ...";
        
        // Запрашиваем устройство с полным доступом
        const device = await navigator.bluetooth.requestDevice({
            acceptAllDevices: true,
            optionalServices: ['00001a00-0000-1000-8000-00805f9b34fb']
        });

        status.innerText = "ВЫШИБАЕМ ДВЕРЬ (GATT CONNECT)...";
        const server = await device.gatt.connect();
        
        // Заходим в сервис управления напрямую
        const service = await server.getPrimaryService('00001a00-0000-1000-8000-00805f9b34fb');
        const rx = await service.getCharacteristic('00001a01-0000-1000-8000-00805f9b34fb');

        status.innerText = "ПРИКАЗ ПРОЦЕССОРУ: СНЯТЬ ЛИМИТЫ!";

        // Пакет 1: Смена региона на Global (США) — 30 км/ч
        const cmd1 = new Uint8Array([0x55, 0xAA, 0x03, 0x22, 0x01, 0x02, 0x14, 0x01, 0xC3]);
        // Пакет 2: Форсированный режим Sport
        const cmd2 = new Uint8Array([0x55, 0xAA, 0x03, 0x22, 0x01, 0x02, 0x1E, 0x01, 0xB9]);

        // "Стреляем" командами без очереди
        await rx.writeValue(cmd1);
        await new Promise(r => setTimeout(r, 150)); // Пауза на перезарядку
        await rx.writeValue(cmd2);

        status.style.color = "#0f0";
        status.innerText = "ПРОЦЕССОР СЛОМАН. ЛИМИТЫ УДАЛЕНЫ.";
        
        alert("УСПЕХ! Самокат теперь подчиняется тебе. ВЫКЛЮЧИ И ВКЛЮЧИ его, чтобы он осознал свою новую силу!");

    } catch (e) {
        status.style.color = "#f0f";
        status.innerText = "ОТКАЗ: " + e.message;
        console.error(e);
    }
}
</script>
</body>
</html>
